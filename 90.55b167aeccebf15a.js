"use strict";(self.webpackChunkmy_sales_app=self.webpackChunkmy_sales_app||[]).push([[90],{2090:(H,h,i)=>{i.r(h),i.d(h,{CategoriesComponent:()=>X});var C=i(467),s=i(9159),g=i(5095),p=i(2042),l=i(5596),d=i(8834),f=i(3207),t=i(4438),m=i(9417),_=i(9631),y=i(2408);function v(o,r){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Name is "),t.j41(2,"strong"),t.EFF(3,"required"),t.k0s()())}function b(o,r){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Name is too short"),t.k0s())}function k(o,r){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Description is "),t.j41(2,"strong"),t.EFF(3,"required"),t.k0s()())}let j=(()=>{class o{back=new t.bkB;save=new t.bkB;set category(e){this.categoryForm.setValue(e)}fb=(0,t.WQX)(m.ok);categoryForm=this.fb.group({id:[null],name:["",[m.k0.required,m.k0.minLength(3)]],description:["",m.k0.required]});onSubmit(){console.log("Button Save clicked in the CategoryFormComponent"),this.save.emit(this.categoryForm.value)}onBack(){this.back.emit()}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=t.VBU({type:o,selectors:[["category-form"]],inputs:{category:"category"},outputs:{back:"back",save:"save"},decls:16,vars:5,consts:[["novalidate","",3,"ngSubmit","formGroup"],[1,"container"],[1,"item-30"],["matInput","","placeholder","Name","formControlName","name"],[1,"item-70"],["matInput","","placeholder","Description","formControlName","description"],["type","button","mat-button","","color","primary",3,"click"],[1,"item"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(n,a){1&n&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return a.onSubmit()}),t.j41(1,"mat-card-content")(2,"div",1)(3,"mat-form-field",2),t.nrm(4,"input",3),t.DNE(5,v,4,0,"mat-error")(6,b,2,0,"mat-error"),t.k0s(),t.j41(7,"mat-form-field",4),t.nrm(8,"input",5),t.DNE(9,k,4,0,"mat-error"),t.k0s()()(),t.j41(10,"mat-card-actions",1)(11,"button",6),t.bIt("click",function(){return a.onBack()}),t.EFF(12," Back "),t.k0s(),t.nrm(13,"div",7),t.j41(14,"button",8),t.EFF(15," Save "),t.k0s()()()),2&n&&(t.Y8G("formGroup",a.categoryForm),t.R7$(5),t.vxM(a.categoryForm.controls.name.hasError("required")?5:-1),t.R7$(),t.vxM(a.categoryForm.controls.name.hasError("minlength")?6:-1),t.R7$(3),t.vxM(a.categoryForm.controls.description.hasError("required")?9:-1),t.R7$(5),t.Y8G("disabled",!a.categoryForm.valid))},dependencies:[d.Hl,d.$z,_.fS,_.fg,y.rl,y.TL,m.X1,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,l.Hu,l.YY,l.m2],encapsulation:2})}return o})();var F=i(9213),E=i(6830),u=i(7669),D=i(1626);let S=(()=>{class o{http;constructor(e){this.http=e}getAll(){return this.http.get(u.c.api+"categories")}save(e){return e.id?this.http.put(u.c.api+"categories/"+e.id,e):this.http.post(u.c.api+"categories",e)}delete(e){return this.http.delete(u.c.api+"categories/"+e)}static \u0275fac=function(n){return new(n||o)(t.KVO(D.Qq))};static \u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const w=()=>[5,10,20];function T(o,r){if(1&o){const e=t.RV6();t.j41(0,"category-form",3),t.bIt("back",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.hideCategoryForm())})("save",function(a){t.eBV(e);const c=t.XpG();return t.Njj(c.onSave(a))}),t.k0s()}if(2&o){const e=t.XpG();t.Y8G("category",e.category)}}function N(o,r){1&o&&(t.j41(0,"th",15),t.EFF(1,"Id"),t.k0s())}function R(o,r){if(1&o&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.R7$(),t.JRh(e.id)}}function G(o,r){1&o&&(t.j41(0,"th",15),t.EFF(1,"Name"),t.k0s())}function $(o,r){if(1&o&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.R7$(),t.JRh(e.name)}}function B(o,r){1&o&&(t.j41(0,"th",15),t.EFF(1,"Description"),t.k0s())}function x(o,r){if(1&o&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.R7$(),t.JRh(e.description)}}function V(o,r){1&o&&t.nrm(0,"th",15)}function I(o,r){if(1&o){const e=t.RV6();t.j41(0,"td",16)(1,"div",17)(2,"button",14),t.bIt("click",function(){const a=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.onEditCategoryClick(a))}),t.EFF(3,"Edit"),t.k0s(),t.j41(4,"button",18),t.bIt("click",function(){const a=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.onDeleteCategoryClick(a))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()()}}function Y(o,r){1&o&&t.nrm(0,"tr",19)}function L(o,r){1&o&&t.nrm(0,"tr",20)}function M(o,r){if(1&o){const e=t.RV6();t.j41(0,"mat-card-content")(1,"table",4),t.qex(2,5),t.DNE(3,N,2,0,"th",6)(4,R,2,1,"td",7),t.bVm(),t.qex(5,8),t.DNE(6,G,2,0,"th",6)(7,$,2,1,"td",7),t.bVm(),t.qex(8,9),t.DNE(9,B,2,0,"th",6)(10,x,2,1,"td",7),t.bVm(),t.qex(11,10),t.DNE(12,V,1,0,"th",6)(13,I,7,0,"td",7),t.bVm(),t.DNE(14,Y,1,0,"tr",11)(15,L,1,0,"tr",12),t.k0s(),t.nrm(16,"mat-paginator",13,0),t.k0s(),t.j41(18,"mat-card-actions")(19,"button",14),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.onNewCategoryClick())}),t.EFF(20,"New Category"),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(14),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("length",e.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.lJ4(6,w))}}let X=(()=>{class o{categoryService;paginator;sort;table;dataSource=new s.I6;showLoading=!1;category;showForm=!1;displayedColumns=["id","name","description","actions"];constructor(e){this.categoryService=e}ngAfterViewInit(){this.loadCategories()}loadCategories(){var e=this;return(0,C.A)(function*(){e.showLoading=!0;const n=yield(0,f.s)(e.categoryService.getAll());e.dataSource=new s.I6(n),e.table.dataSource=e.dataSource,e.dataSource.sort=e.sort,e.dataSource.paginator=e.paginator,e.showLoading=!1})()}onNewCategoryClick(){this.category={id:0,name:"",description:""},this.showForm=!0}hideCategoryForm(){this.showForm=!1,this.loadCategories()}onSave(e){var n=this;return(0,C.A)(function*(){yield(0,f.s)(n.categoryService.save(e)),n.hideCategoryForm()})()}onEditCategoryClick(e){this.category=e,this.showForm=!0}onDeleteCategoryClick(e){var n=this;return(0,C.A)(function*(){console.log("delete category",e),confirm(`Delete "${e.name}" with ID ${e.id} ?`)&&(n.showLoading=!0,yield(0,f.s)(n.categoryService.delete(e.id)),n.showLoading=!1,n.loadCategories())})()}static \u0275fac=function(n){return new(n||o)(t.rXU(S))};static \u0275cmp=t.VBU({type:o,selectors:[["app-categories"]],viewQuery:function(n,a){if(1&n&&(t.GBs(g.iy,5),t.GBs(p.B4,5),t.GBs(s.Zl,5)),2&n){let c;t.mGM(c=t.lsd())&&(a.paginator=c.first),t.mGM(c=t.lsd())&&(a.sort=c.first),t.mGM(c=t.lsd())&&(a.table=c.first)}},decls:9,vars:2,consts:[["paginator",""],[3,"visible"],[3,"category"],[3,"back","save","category"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-button","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"container","center"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&(t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3,"Categories"),t.k0s(),t.j41(4,"mat-card-subtitle"),t.EFF(5,"Listing all categories"),t.k0s()(),t.nrm(6,"loading-bar",1),t.DNE(7,T,1,1,"category-form",2)(8,M,21,7),t.k0s()),2&n&&(t.R7$(6),t.Y8G("visible",a.showLoading),t.R7$(),t.vxM(a.showForm?7:8))},dependencies:[s.tP,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.Ou,g.iy,p.NQ,p.B4,p.aE,l.Hu,l.RN,l.YY,l.m2,l.MM,l.Lc,l.dh,d.Hl,d.$z,d.iY,j,F.m_,F.An,E.D],styles:[".full-width-table[_ngcontent-%COMP%]{width:100%}"]})}return o})()}}]);