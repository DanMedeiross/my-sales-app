import{A as R,B as ut,C as H,D as ft,E as gt,F as q,G as _t,H as yt,I as ht,J as wt,K as St,L as bt,M as vt,N as Mt,O as xt,P as Ft,Q as P,a as w,b as Y,c as V,d as Z,e as N,g as tt,i as B,j as et,k as it,l as ot,m as rt,o as at,p as nt,q as mt,r as lt,s as st,u as pt,v as Ct}from"./chunk-L4I6ZCCY.js";import{a as J,da as K,ea as U,ga as T,ha as W,ia as k,ja as X,ka as I,la as ct,ma as dt}from"./chunk-SGCUGMVZ.js";import"./chunk-HU7WFQWJ.js";import{Cb as g,Gb as o,Hb as r,Ib as c,Jb as y,Kb as h,Mb as M,Ob as p,Pb as C,Tb as x,Ub as F,Vb as E,Za as l,Zb as a,_ as Q,_a as z,_b as D,cc as G,d as S,da as $,ea as j,kb as v,ma as u,na as f,pb as s,s as b,wa as A,xb as d}from"./chunk-JINVSHNL.js";function Vt(e,t){e&1&&(o(0,"mat-error"),a(1,"Name is "),o(2,"strong"),a(3,"required"),r()())}function Nt(e,t){e&1&&(o(0,"mat-error"),a(1,"Name is too short"),r())}function Bt(e,t){e&1&&(o(0,"mat-error"),a(1,"Description is "),o(2,"strong"),a(3,"required"),r()())}var L=class e{back=new A;save=new A;set category(t){this.categoryForm.setValue(t)}fb=j(nt);categoryForm=this.fb.group({id:[null],name:["",[B.required,B.minLength(3)]],description:["",B.required]});onSubmit(){console.log("Button Save clicked in the CategoryFormComponent"),this.save.emit(this.categoryForm.value)}onBack(){this.back.emit()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=v({type:e,selectors:[["category-form"]],inputs:{category:"category"},outputs:{back:"back",save:"save"},decls:16,vars:5,consts:[["novalidate","",3,"ngSubmit","formGroup"],[1,"container"],[1,"item-30"],["matInput","","placeholder","Name","formControlName","name"],[1,"item-70"],["matInput","","placeholder","Description","formControlName","description"],["type","button","mat-button","","color","primary",3,"click"],[1,"item"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(i,n){i&1&&(o(0,"form",0),p("ngSubmit",function(){return n.onSubmit()}),o(1,"mat-card-content")(2,"div",1)(3,"mat-form-field",2),c(4,"input",3),s(5,Vt,4,0,"mat-error")(6,Nt,2,0,"mat-error"),r(),o(7,"mat-form-field",4),c(8,"input",5),s(9,Bt,4,0,"mat-error"),r()()(),o(10,"mat-card-actions",1)(11,"button",6),p("click",function(){return n.onBack()}),a(12," Back "),r(),c(13,"div",7),o(14,"button",8),a(15," Save "),r()()()),i&2&&(d("formGroup",n.categoryForm),l(5),g(n.categoryForm.controls.name.hasError("required")?5:-1),l(),g(n.categoryForm.controls.name.hasError("minlength")?6:-1),l(3),g(n.categoryForm.controls.description.hasError("required")?9:-1),l(5),d("disabled",!n.categoryForm.valid))},dependencies:[N,V,Ct,pt,st,lt,mt,ot,tt,et,it,rt,at,I,k,T],encapsulation:2})};var O=class e{constructor(t){this.http=t}getAll(){return this.http.get(w.api+"categories")}save(t){return t.id?this.http.put(w.api+"categories/"+t.id,t):this.http.post(w.api+"categories",t)}delete(t){return this.http.delete(w.api+"categories/"+t)}static \u0275fac=function(i){return new(i||e)($(J))};static \u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"})};var Ht=()=>[5,10,20];function qt(e,t){if(e&1){let i=M();o(0,"category-form",3),p("back",function(){u(i);let m=C();return f(m.hideCategoryForm())})("save",function(m){u(i);let _=C();return f(_.onSave(m))}),r()}if(e&2){let i=C();d("category",i.category)}}function Lt(e,t){e&1&&(o(0,"th",15),a(1,"Id"),r())}function Ot(e,t){if(e&1&&(o(0,"td",16),a(1),r()),e&2){let i=t.$implicit;l(),D(i.id)}}function At(e,t){e&1&&(o(0,"th",15),a(1,"Name"),r())}function Pt(e,t){if(e&1&&(o(0,"td",16),a(1),r()),e&2){let i=t.$implicit;l(),D(i.name)}}function Qt(e,t){e&1&&(o(0,"th",15),a(1,"Description"),r())}function $t(e,t){if(e&1&&(o(0,"td",16),a(1),r()),e&2){let i=t.$implicit;l(),D(i.description)}}function jt(e,t){e&1&&c(0,"th",15)}function zt(e,t){if(e&1){let i=M();o(0,"td",16)(1,"div",17)(2,"button",14),p("click",function(){let m=u(i).$implicit,_=C(2);return f(_.onEditCategoryClick(m))}),a(3,"Edit"),r(),o(4,"button",18),p("click",function(){let m=u(i).$implicit,_=C(2);return f(_.onDeleteCategoryClick(m))}),o(5,"mat-icon"),a(6,"delete"),r()()()()}}function Gt(e,t){e&1&&c(0,"tr",19)}function Jt(e,t){e&1&&c(0,"tr",20)}function Kt(e,t){if(e&1){let i=M();o(0,"mat-card-content")(1,"table",4),y(2,5),s(3,Lt,2,0,"th",6)(4,Ot,2,1,"td",7),h(),y(5,8),s(6,At,2,0,"th",6)(7,Pt,2,1,"td",7),h(),y(8,9),s(9,Qt,2,0,"th",6)(10,$t,2,1,"td",7),h(),y(11,10),s(12,jt,1,0,"th",6)(13,zt,7,0,"td",7),h(),s(14,Gt,1,0,"tr",11)(15,Jt,1,0,"tr",12),r(),c(16,"mat-paginator",13,0),r(),o(18,"mat-card-actions")(19,"button",14),p("click",function(){u(i);let m=C();return f(m.onNewCategoryClick())}),a(20,"New Category"),r()()}if(e&2){let i=C();l(14),d("matHeaderRowDef",i.displayedColumns),l(),d("matRowDefColumns",i.displayedColumns),l(),d("length",i.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",G(6,Ht))}}var Dt=class e{constructor(t){this.categoryService=t}paginator;sort;table;dataSource=new P;showLoading=!1;category;showForm=!1;displayedColumns=["id","name","description","actions"];ngAfterViewInit(){this.loadCategories()}loadCategories(){return S(this,null,function*(){this.showLoading=!0;let t=yield b(this.categoryService.getAll());this.dataSource=new P(t),this.table.dataSource=this.dataSource,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.showLoading=!1})}onNewCategoryClick(){this.category={id:0,name:"",description:""},this.showForm=!0}hideCategoryForm(){this.showForm=!1,this.loadCategories()}onSave(t){return S(this,null,function*(){let i=yield b(this.categoryService.save(t));this.hideCategoryForm()})}onEditCategoryClick(t){this.category=t,this.showForm=!0}onDeleteCategoryClick(t){return S(this,null,function*(){console.log("delete category",t),confirm(`Delete "${t.name}" with ID ${t.id} ?`)&&(this.showLoading=!0,yield b(this.categoryService.delete(t.id)),this.showLoading=!1,this.loadCategories())})}static \u0275fac=function(i){return new(i||e)(z(O))};static \u0275cmp=v({type:e,selectors:[["app-categories"]],viewQuery:function(i,n){if(i&1&&(x(R,5),x(H,5),x(q,5)),i&2){let m;F(m=E())&&(n.paginator=m.first),F(m=E())&&(n.sort=m.first),F(m=E())&&(n.table=m.first)}},decls:9,vars:2,consts:[["paginator",""],[3,"visible"],[3,"category"],[3,"back","save","category"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-button","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"container","center"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,n){i&1&&(o(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),a(3,"Categories"),r(),o(4,"mat-card-subtitle"),a(5,"Listing all categories"),r()(),c(6,"loading-bar",1),s(7,qt,1,1,"category-form",2)(8,Kt,21,7),r()),i&2&&(l(6),d("visible",n.showLoading),l(),g(n.showForm?7:8))},dependencies:[Ft,q,yt,bt,ht,_t,vt,wt,St,Mt,xt,ut,R,gt,H,ft,I,K,k,T,X,W,U,N,V,Z,L,dt,ct,Y],styles:[".full-width-table[_ngcontent-%COMP%]{width:100%}"]})};export{Dt as CategoriesComponent};
